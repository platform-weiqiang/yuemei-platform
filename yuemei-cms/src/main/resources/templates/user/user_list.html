<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <link th:href="@{/css/style.css}" rel="stylesheet" type="text/css" />
    <script th:src="@{/scripts/boot.js}" type="text/javascript"></script>
</head>
<body >   
<div class="mini-toolbar" style="padding:2px;border-bottom:0;">
        <table style="width:100%;">
            <tr>
            <td style="width:100%;">
                <a class="mini-button" iconCls="icon-add" onclick="add()">添加</a>
                <a class="mini-button" iconCls="icon-edit">编辑</a>
                <a class="mini-button" iconCls="icon-remove">删除</a>
            </td>
            <td style="white-space:nowrap;"><label style="font-family:Verdana;">名称: </label>
                <input class="mini-textbox" />
                <a class="mini-button" iconCls="icon-search" onclick="onSearch()">查询</a>
                </td>
            </tr>
        </table>
    </div>
    <!--撑满页面-->
    <div class="mini-fit" >
        <div id="datagrid1" class="mini-datagrid" style="width:100%;height:100%;" url="/user/slectByUser"  idField="id" sizeList="[5,10,20,50]" pageSize="10">
            <div property="columns">
               <!--  <div field="id" headerAlign="center" align="center"  allowSort="true">序号</div>
                <div field="nickname" width="120" align="center" headerAlign="center" allowSort="false">用户帐号</div>    
                <div field="email" width="120" align="center" headerAlign="center" allowSort="false">用户邮箱</div>                            
                <div field="tel" width="100" align="center" headerAlign="center">手机</div>
                <div field="status" width="100" headerAlign="center" align="center" renderer="onStatus" allowSort="true">状态</div>                                    
                <div field="create_time" width="100" headerAlign="center" align="center" dateFormat="yyyy-MM-dd HH:mm:ss" allowSort="true">创建日期</div>      -->
                <!--<div type="indexcolumn"></div>        -->
	            <div type="checkcolumn" ></div>        
	            <div field="loginname" width="120" headerAlign="center" allowSort="true">员工帐号</div>    
	            <div field="name" width="120" headerAlign="center" allowSort="true">姓名</div>    
	            <div header="工作信息" headerAlign="center">
	                <div property="columns">
	                    <div field="dept_name" width="120" headerAlign="center">所属部门</div>
	                    <div field="position_name" width="100" headerAlign="center">职位</div>
	                    <div field="salary" dataType="currency" currencyUnit="￥" headerAlign="center" width="100" allowSort="true">薪资</div>
	                </div>
	            </div>
	            <div field="createtime" width="100" headerAlign="center" dateFormat="yyyy-MM-dd" allowSort="true">创建日期</div>    
	            <div header="基本信息" headerAlign="center">
	                <div property="columns">
	                    <div field="gender" width="100" renderer="onGenderRenderer" headerAlign="center">性别</div>
	                    <div field="age" width="100" allowSort="true" headerAlign="center">年龄</div>
	                    <div field="birthday" width="100" renderer="onBirthdayRenderer" headerAlign="center">出生日期</div>
	                    <div field="married" width="100" align="center" renderer="onMarriedRenderer" headerAlign="center">婚否</div>
	                    <div field="email" width="100" headerAlign="center">邮箱</div>
	                </div>
	            </div>
	            <div header="学历信息" headerAlign="center">
	                <div property="columns">
	                    <div field="educational_name" width="100" headerAlign="center">学历</div>
	                    <div field="school" width="120" headerAlign="center">毕业院校</div>
	                </div>
	            </div>  
            </div>
        </div> 
    </div>
    
    <script type="text/javascript">
        mini.parse();
        var grid = mini.get("datagrid1");
        grid.load();
        function onSearch() {
            mini.open({
                url: bootPATH + "../demo/CommonLibs/SelectGridWindow.html"
            });
        }
        function onStatus(e) {
            if (e.value == 1) return "有效";
            else return "无效";
        }
        function add() {
        	mini.open({
        	    url: bootPATH + "../user/addUserPage",
        	    title: "新增用户", width: 600, height: 400,
        	    onload: function () {
        	        var iframe = this.getIFrameEl();
        	        var data = { action: "new"};
        	        iframe.contentWindow.SetData(data);
        	    },
        	    ondestroy: function (action) {
        	        grid.reload();
        	    }
           });
        }
    </script>
</body>
</html>